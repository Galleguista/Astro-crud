<!-- ---
import { login } from '../utils/auth';
let errorMessage = '';
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login</title>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.0.0/dist/cdn.min.js" defer></script>
  </head>
  <body>
    <form x-data="{ errorMessage: '', handleLogin(e) { 
        e.preventDefault(); 
        const username = e.target.username.value; 
        const password = e.target.password.value;
        
        if (!login(username, password)) {
          this.errorMessage = 'Usuario o contraseña incorrectos.';
        } else {
          window.location.href = '/admin';
        }
      }}"
      @submit="handleLogin">
      <h2>Iniciar Sesión</h2>
      <div>
        <label for="username">Usuario:</label>
        <input type="text" id="username" name="username" required />
      </div>
      <div>
        <label for="password">Contraseña:</label>
        <input type="password" id="password" name="password" required />
      </div>
      <button type="submit">Login</button>
      <template x-if="errorMessage">
        <p style="color: red;" x-text="errorMessage"></p>
      </template>
    </form>
  </body>
</html> -->
